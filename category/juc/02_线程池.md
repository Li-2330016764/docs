# 线程池-治理线程
---

## 线程池介绍
### 为什么使用线程池
> 如果不使用线程池，每个任务都单开一个线程，在某种意义上可行的，不过当任务数量过多的情况会引发两个问题：
> - jvm对线程的数量是有要求的,过多的线程占用太多内存
> - 频繁的创建线程和销毁线程成本过高
> 线程池就就是使用少量的线程，避免内存占用过高；让部分线程一直保持工作，且反复执行任务，避免生命周期的损耗

### 线程池的好处
- 通过避免频繁的创建和销毁，加快响应速度
- 合理的利用CPU和内存
- 统一分配和管理线程

### 线程池的使用场景
> - 服务器接收到大量请求时，使用线程池的技术是合适的，它可以大大减少线程的创建和销毁次数，提高服务器的运行效率
> - 在实际开发中，如果需要创建5个以上的线程时就需要使用线程池

## 增减线程的时机
### 线程池构造函数

参数名称|类型|含义
-|-|-
corePoolSize|int|核心线程数
maxPoolSize|int|最大线程数量
keepAliveTime|long|保持队列存活时间
threadFactory|ThreadFactory|当线程池需要新的线程的时候，会使用threadFactory来生成新的线程
Handler|RejectedExecutionHandler|由于线程池无法接收你所提交的任务时的拒绝策略

#### corePoolSize 和 maxPoolSize
> corePoolSize指的是核心线程数：线程池完成初始化之后，默认情况下，线程池中并没有任何线程，线程池会等待有任务来时再去创建新线程执行任务

> 线程池有可能在核心线程数的基础上，额外增加一些线程，但是这些新增加的线程是有一个上限，就是最大量maxPoolSize

> maximumPoolSize和maxPoolSize的含义相同，不做额外区分。
> 实际上，在ThreadPoolExecutor类的参数中，变量名是maximumPoolSize；
> 不过在org.springframework.scheduling.concurrent包的ThreadPoolExecutorFactoryBean类等其他类中，
> 也有使用maxPoolSize作为参数名的情况，我们直接理解为maximumPoolSize和maxPoolSize是相同的就可以了。

